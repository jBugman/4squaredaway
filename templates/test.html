{% extends "bootstrap.html" %}
{% block content %}
<section ng-controller="SearchResultsController" class="ng-cloak">
<div class="row">
	<div class="span">
		<a href="/#/search" class="btn btn-large btn-success" ng-click="search()" eat-click type="button">
			<i class="icon-star icon-white"></i>
			Найти как <span class="nowrap">по-волшебству!</span>
		</a>
	</div>
	<div class="span">
		<form class="form-search form__height_large">
			<input type="text" class="input-medium search-query">
			<a href="#/search" type="submit" class="btn">Найти по запросу</a>
		</form>
	</div>
</div>
<div class="row search-results-container" ng-show="searchResults.length">
	<div class="span12">
		<h3>Найдено по-волшебству <small class="search-results-count nowrap">{[{ searchResults.length }]} {[{ declension(searchResults.length, ['объект', 'объекта', 'объектов']) }]}</small></h3>
		<div class="row search-results">
			<div class="span9">
				<div class="row-fluid search-result ng-class:{irrelevant: isIrrelevant(venue)}" ng-repeat="venue in searchResults">
					<div class="search-result-content">
						<img class="search-result-icon" ng-src="{[{ venue.icon[0] + 'bg_44' + venue.icon[1] }]}" alt="{[{ venue.categories }]}" title="{[{ venue.categories }]}">
						<h4 class="search-result-header"><a href="{[{ venue.url }]}">{[{ venue.name }]}</a></h4>
						<div class="search-result-description">
							<span>{[{ venue.categories.join(', ') }]}</span>
							<span class="search-result-address muted">{[{ venue.address }]}</span>
						</div>
						<div class="search-result-stats">
							<span class="search-result-stats__checkins">{[{ venue.checkins }]}</span>
							<span><i class="icon-user icon"></i>{[{ venue.users }]}</span>
							<span class="ng-class:{muted: !venue.tips}"><i class="icon-comment icon"></i>{[{ venue.tips }]}</span>
							<span class="ng-class:{muted: !venue.likes}"><i class="icon-heart icon"></i>{[{ venue.likes }]}</span>
							<span class="ng-class:{muted: !venue.photos}"><i class="icon-camera icon"></i>{[{ venue.photos }]}</span>
						</div>
						<div class="btn-group search-result-controls">
							<button type="button" class="btn btn-large" ng-model="venue.marked" btn-radio="true" title="{[{ venue.relevance }]}">
								<i class="icon-home"></i>
								это дом
							</button>
							<button type="button" class="btn btn-large" ng-model="venue.marked" btn-radio="false">
								<i class="icon-ok"></i>
								все ОК
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="span3 infobox muted">
				Тут место для всякой метадаты запроса, информации об истраченных лимитах и прочего.
			</div>
		</div>
	</div>
</div>
<div class="row" ng-show="searchResults.length">
	<div class="span9">
		<a href="#/go!" class="btn btn-large btn-info pull-right button-results-submit" type="button">
			Отправить <span id="4sq-send-title">{[{ markedCount() }]} {[{ declension(markedCount(), ['место', 'места', 'мест']) }]}</span> на проверку
		</a>
	</div>
</div>
<footer class="row footer">
	<img class="pull-right footer__foursquare-powered ng-class:{position_fixed: !searchResults.length}" src="https://playfoursquare.s3.amazonaws.com/press/logo/poweredByFoursquare_gray.png">
</footer>
</section>
{% endblock %}
{% block scripts %}
<script>
	window.FSQ = {};
	window.FSQ.apiUrl = "{{ url_for('api_test') }}";
</script>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}
